{const t=this;(self.webpackChunkStylus=self.webpackChunkStylus||[]).push([["options"],{5834:(e,n,o)=>{o(4404),o(7337);var s=o(6001),a=o(9030),c=o(6308),i=o(9204),l=o(2691),d=o(4435),r=o(9521);o(4523),(async()=>{let{sync:t,syncOpts:e}=l.clientData;const n=(0,s.$)(".sync-options",c.template.body),o=(0,s.$)(".cloud-name",n),a=(0,s.$)(".connect",n),d=(0,s.$)(".sync-now",n),p=(0,s.$)(".sync-status",n),u=(0,s.$)(".sync-login",n),g=(0,s.$$)(".drive-options",n),$$driveOptions=()=>(0,s.$$)(`[data-drive=${o.value}] [data-option]`,n);function getDriveOptions(){const t={};for(const e of $$driveOptions())t[e.dataset.option]=e.value;return t}async function updateButtons(){const l=t.state,r=t.STATES,f=l===r.connected,$=l===r.disconnected,y=t.currentDriveName;y&&(o.value=y),o.disabled=!$,a.disabled=t.syncing,a.textContent=(0,c.t)("optionsSync"+($?"Connect":"Disconnect")),a.dataset.cmd=$?"start":"stop",d.disabled=!f||t.syncing||!t.login,p.textContent=getStatusText(),u.hidden=!f||t.login;for(const t of g)t.hidden=t.dataset.drive!==o.value,t.disabled=!$;(0,s.toggleDataset)(n,"enabled","none"!==o.value),e??=await i.API.sync.getDriveOptions(o.value);for(const t of $$driveOptions())t.value=e[t.dataset.option]||"";e=null}function getStatusText(){if(t.syncing){const{phase:e,loaded:n,total:o}=t.progress||{};return e?(0,c.t)(`optionsSyncStatus${(0,r.capitalize)(e)}`,[n+1,o],!1)||`${e} ${n} / ${o}`:(0,c.t)("optionsSyncStatusSyncing")}const{state:e,errorMessage:n,STATES:o}=t;return!n||e!==o.connected&&e!==o.disconnected?e!==o.connected||t.login?(0,c.t)(`optionsSyncStatus${(0,r.capitalize)(e)}`,null,!1)||e:(0,c.t)("optionsSyncStatusRelogin"):n}updateButtons(),(0,i.onExtension)(e=>{var n;"syncStatusUpdate"===e.method&&(n=e.status,t=n,updateButtons())}),o.on("change",updateButtons),a.onclick=async()=>{"start"===a.dataset.cmd?(await i.API.sync.setDriveOptions(o.value,getDriveOptions()),await i.API.sync.start(o.value)):await i.API.sync.stop()},d.onclick=i.API.sync.syncNow,u.onclick=async()=>{await i.API.sync.login(),await i.API.sync.syncNow()}})(),(0,c.tBody)(),(0,a.setupLivePrefs)(),(0,s.$$)("input[min], input[max]").forEach(function(t){const e=Number(t.min),n=Number(t.max),doNotify=()=>t.dispatchEvent(new Event("change",{bubbles:!0})),onChange=({type:o})=>{"input"===o&&t.checkValidity()?doNotify():"change"!==o||t.checkValidity()||(t.value=(0,r.clamp)(Number(t.value),e,n),doNotify())};t.on("change",onChange),t.on("input",onChange)}),(0,s.$)("#FOUC .items").textContent=(0,c.t)("optionFOUCMV3").replace("<a>",(0,c.t)("optionsAdvancedStyleViaXhr")).replace("<b>",(0,c.t)("optionKeepAlive")),(0,s.$)("#keepAlive").previousElementSibling.firstChild.textContent+=(/^(zh|ja|ko)/.test(s.$.root.lang)?"":" ")+(0,c.t)("optionKeepAliveLegend").trim();for(const t of(0,s.$$)("[show-if]"))l.subscribe(t.getAttribute("show-if").replace(/^!/,""),toggleShowIf,!0);t.on("keydown",t=>{"Escape"===(0,a.getEventKeyName)(t)&&tellTopToCloseOptions()}),(0,s.$)("header i").onclick=tellTopToCloseOptions,(0,s.$)("#manage").onclick=()=>{i.API.openManage()},(0,s.$)("#manage.newUI.favicons").onclick=()=>{i.API.prefsDb.delete("badFavs")},(0,s.$)("#shortcuts").onclick=()=>{i.API.openURL({url:(d.OPERA?"opera://settings":"chrome://extensions")+"/configureCommands"})},(0,s.$)("#shortcuts").hidden=d.FIREFOX&&!browser.commands?.update,(0,s.$)("#reset").onclick=async()=>{if(await a.messageBox.confirm((0,c.t)("confirmDiscardChanges")))for(const t of(0,s.$$)("input")){const e=t.id||t.name;l.knownKeys.includes(e)&&l.reset(e)}};for(const t of(0,s.$$)("[data-clickable]")){const e=t.dataset.clickable,n=t.textContent.match(new RegExp(`^(.*\\W)(${e})(?=\\W)(.*)`));if(!n)continue;const o=(0,s.$)("input",t.closest("label")),c=(0,s.$create)("span.clickable",{onclick:()=>(0,a.setInputValue)(o,e)},n[2]);t.firstChild.replaceWith(n[1],c,n[3])}function toggleShowIf(t,e){for(const n of(0,s.$$)(`[show-if="${t}"], [show-if="!${t}"]`))n.classList.toggle("disabled","!"===n.getAttribute("show-if")[0]?!!e:!e)}function tellTopToCloseOptions(){top.closeOptions()}(async()=>{const{wrb:t}=l.clientData;if(!1===t)for(let t of(0,s.$$)("#patchCsp"))t=t.closest("label"),t.classList.add("disabled"),(0,s.$)(".icon",t).after((0,s.$create)("a.broken",{"data-cmd":"note",tabIndex:0,title:(0,c.t)("webRequestBlockingMV3Note",chrome.runtime.id)},"âš’"))})()}},t=>{t.O(0,["common-ui","css_global-dark_css-css_global_css-css_spinner_css"],()=>t(t.s=5834)),t.O()}])}