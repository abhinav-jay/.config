(self.webpackChunkStylus=self.webpackChunkStylus||[]).push([["edit_show-keymap-help_js"],{8945:(e,t,n)=>{n.r(t),n.d(t,{default:()=>showKeymapHelp});var o=n(6759),r=n(6001),l=n(6308),a=n(2691),c=n(9521),s=n(6100);let p,d;function showKeymapHelp(){const e="editor.keyMap",t=mergeKeyMaps({},a.get(e),o.extraKeys),n=Object.keys(t).map(e=>({key:e,cmd:t[e]})).sort((e,t)=>e.cmd<t.cmd||e.cmd===t.cmd&&e.key<t.key?-1:1),c=l.template.keymapHelp.cloneNode(!0),i=(d=c.tBodies[0]).rows[0],h=i.children[0],u=i.children[1];d.textContent="";for(const{key:e,cmd:t}of n)h.textContent=e,u.textContent=t,d.appendChild(i.cloneNode(!0));s.helpPopup.show((0,l.t)("cm_keyMap")+": "+a.get(e),c,{"data-id":e}),p=(0,r.$$)("input",c),p[0].on("keydown",hotkeyHandler),p[1].focus(),c.oninput=filterTable}function hotkeyHandler(e){const t=o.CodeMirror.keyName(e);if("Esc"===t||"Tab"===t||"Shift-Tab"===t)return;e.preventDefault(),e.stopPropagation();const n={};n[t.replace(/(Shift|Ctrl|Alt|Cmd)$/,"$&-dummy")]="";const r=Object.keys(o.CodeMirror.normalizeKeyMap(n))[0];this.value=r.replace("-dummy",""),filterTable(e)}function filterTable(e){const t=e.target,n=t.parentNode.cellIndex;p[1-n].value="";for(const e of d.rows){const o=e.children[n],l=o.textContent,a=(0,c.stringAsRegExp)(t.value,"gi"),s=a.test(l);if(e.style.display=t.value&&!1===s?"none":"",t.value&&s){o.textContent="";let e=0;l.replace(a,(t,n)=>{n>e&&o.appendChild(document.createTextNode(l.substring(e,n))),o.appendChild((0,r.$create)("mark",t)),e=n+t.length}),e<l.length&&o.appendChild(document.createTextNode(l.substring(e)))}else o.textContent=l;const p=e.children[1-n];p.children.length&&(p.textContent=p.innerText)}}function mergeKeyMaps(e,...t){return t.forEach(t=>{"string"==typeof t&&(t=o.CodeMirror.keyMap[t]),Object.keys(t).forEach(n=>{let o=t[n];e[n]||n.match(/^[a-z]/)||"..."===o||("function"==typeof o?(o=o.toString().replace(/^function.*?{[\s\r\n]*([\s\S]+?)[\s\r\n]*}$/,"$1"),e[n]=(0,c.clipString)(o,200)):e[n]=o)}),t.fallthrough&&(e=mergeKeyMaps(e,t.fallthrough))}),e}}}]);